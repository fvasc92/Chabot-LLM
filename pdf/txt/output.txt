IPBRICK - Vers˜ao 6.0
Manual Instala¸c˜ao
IPBRICK SA
Agosto 2014
2
Copyright c⃝IPBRICK SA
Todos os direitos reservados. Agosto 2014.
A informa¸c˜ao contida neste documento pode ser alterada sem aviso pr´evio. As
explica¸c˜oes apresentadas, os dados t´ecnicos, as conﬁgura¸c˜oes e as recomenda¸c˜oes
s˜ao precisas e ﬁ´aveis. No entanto, n˜ao possuem garantias expressas ou impl´ıcitas..
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
Conte´udo
1
Objectivo deste documento
5
2
Antes de Come¸car
7
3
Instala¸c˜ao da IPBRICK
9
3.1
Requisitos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
9
3.2
Procedimento de Instala¸c˜ao
. . . . . . . . . . . . . . . . . . . . . .
9
3.3
Men´u do Instalador . . . . . . . . . . . . . . . . . . . . . . . . . . .
10
3.3.1
Install . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
10
3.3.2
Upgrade/ReInstall
. . . . . . . . . . . . . . . . . . . . . . .
10
3.3.3
Advanced Install
. . . . . . . . . . . . . . . . . . . . . . . .
11
3.3.4
Instala¸c˜ao a partir de uma Pen USB
. . . . . . . . . . . . .
15
3.3.5
Manual
. . . . . . . . . . . . . . . . . . . . . . . . . . . . .
17
3.4
Procedimento normal de instala¸c˜ao . . . . . . . . . . . . . . . . . .
17
3.4.1
Modo Gr´aﬁco . . . . . . . . . . . . . . . . . . . . . . . . . .
17
3.4.2
Modo Texto . . . . . . . . . . . . . . . . . . . . . . . . . . .
18
3.4.3
Auto Dete¸c˜ao de Instala¸c˜oes Anteriores . . . . . . . . . . . .
20
3.5
Mensagens de Erro . . . . . . . . . . . . . . . . . . . . . . . . . . .
21
3.6
Instala¸c˜ao Personalizada . . . . . . . . . . . . . . . . . . . . . . . .
22
3.6.1
Custom Partitioning
. . . . . . . . . . . . . . . . . . . . . .
22
3.6.2
Software RAID installation . . . . . . . . . . . . . . . . . . .
22
4
Gerir a IPBrick
25
4.1
Conﬁgura¸c˜ao da Rede
. . . . . . . . . . . . . . . . . . . . . . . . .
25
4.2
Liga¸c˜ao `a IPBRICK
. . . . . . . . . . . . . . . . . . . . . . . . . .
25
4.2.1
Liga¸c˜ao Directa . . . . . . . . . . . . . . . . . . . . . . . . .
26
4.2.2
Liga¸c˜ao atrav´es de um hub ou de um switch . . . . . . . . .
28
4.3
Logins e Passwords . . . . . . . . . . . . . . . . . . . . . . . . . . .
30
4.3.1
IPBRICK - Interface Web (GUI)
. . . . . . . . . . . . . . .
30
4.3.2
IPBRICK - Console . . . . . . . . . . . . . . . . . . . . . . .
30
4.3.3
IPBRICK - C´opia de Correio
. . . . . . . . . . . . . . . . .
30
4.3.4
IPBRICK - IPBRICK.SEC AntiSpam . . . . . . . . . . . . .
31
4.3.5
IPBRICK - Contactos
. . . . . . . . . . . . . . . . . . . . .
31
4.3.6
PostgreSQL - DataBase Server . . . . . . . . . . . . . . . . .
31
4.3.7
Anti-Spam . . . . . . . . . . . . . . . . . . . . . . . . . . . .
32
4.3.8
IPBRICKCAFE . . . . . . . . . . . . . . . . . . . . . . . . .
32
4.3.9
Groupware . . . . . . . . . . . . . . . . . . . . . . . . . . . .
33
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
4
CONTE ´UDO
4.3.10 IPBrick - Instant Messaging . . . . . . . . . . . . . . . . . .
33
4.3.11 IPBrick - Callmanager . . . . . . . . . . . . . . . . . . . . .
33
4.3.12 VOIP CDR . . . . . . . . . . . . . . . . . . . . . . . . . . .
33
5
Mais informa¸c˜ao
35
5.1
Suporte T´ecnico . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
35
5.2
Links ´Uteis
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
35
6
Apˆendice A - IPBrick.GT
37
6.1
Liga¸c˜oes IPBBrick.GT . . . . . . . . . . . . . . . . . . . . . . . . .
37
6.2
Comunica¸c˜oes anal´ogicas . . . . . . . . . . . . . . . . . . . . . . . .
38
6.3
Comunica¸c˜oes Digitais . . . . . . . . . . . . . . . . . . . . . . . . .
38
6.3.1
BRI
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
39
6.3.2
PRI
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
40
7
Apˆendice B - Recupera¸c˜ao de Desastre
45
7.0.1
Alterar o nome da pen USB . . . . . . . . . . . . . . . . . .
45
7.0.2
Formatar a pen USB . . . . . . . . . . . . . . . . . . . . . .
46
8
Apˆendice C - Procedimentos Importantes
49
8.1
Credenciais do utilizador Administrador
. . . . . . . . . . . . . . .
51
8.2
Credenciais dos Utilizadores de Sistema . . . . . . . . . . . . . . . .
52
8.3
Credenciais do administrador do sistema . . . . . . . . . . . . . . .
54
8.4
CAFE e PostGresSQL
. . . . . . . . . . . . . . . . . . . . . . . . .
55
8.5
Alertas de Email
. . . . . . . . . . . . . . . . . . . . . . . . . . . .
55
8.6
Email para envio das deﬁni¸c˜oes do sistema . . . . . . . . . . . . . .
56
8.7
Email para o envio das notiﬁca¸c˜oes dos backups das BDs . . . . . .
57
8.8
Servi¸cos a serem prestados neste servidor . . . . . . . . . . . . . . .
59
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
Cap´ıtulo 1
Objectivo deste documento
Este manual cont´em instru¸c˜oes importantes e ´uteis sobre o procedimento de in-
stala¸c˜ao da IPBrick e tenta gui´a-lo ao longo de todas as etapas necess´arias `a sua
conclus˜ao.
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
6
Objectivo deste documento
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
Cap´ıtulo 2
Antes de Come¸car
Aten¸c˜ao:
• Ao arrancar a partir do DVD IPBRICK a instala¸c˜ao do software inicia-se
imediatamente.
• Existir´a um servidor ativo de DHCP ap´os a instala¸c˜ao.
• A IPBrick v6.0 vem com um browser nativo (para mais informa¸c˜ao, por favor
consulte a sec¸c˜ao- 4.2 deste documento).
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
8
Antes de Come¸car
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
Cap´ıtulo 3
Instala¸c˜ao da IPBRICK
A instala¸c˜ao de um servidor IPBrick ´e feita utilizando um s´o DVD.
3.1
Requisitos
• DVD de instala¸c˜ao IPBRICK (Boot DVD);
• PC x86-64;
• M´ınimo de 2GB de RAM;
• HDD: um m´ınimo de 20GB de espa¸co em disco (tamanho total do disco
r´ıgido);
• BIOS com capacidade de boot via DVD;
• Placa de rede (Ethernet 100Base-TX).
3.2
Procedimento de Instala¸c˜ao
1. Inserir o DVD de arranque IPBRICK na drive de DVD-Rom;
2. Permitir o arranque a partir de DVD nas op¸c˜oes da BIOS do PC;
3. Arranque o PC usando o DVD IPBRICK de instala¸c˜ao autom´atica;
4. O log´otipo IPBRICK ser´a visualizado assim como o men´u de arranque.
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
10
Instala¸c˜ao da IPBRICK
5. Dez segundos depois o processo autom´atico de instala¸c˜ao ´e iniciado.
Nota: Se desejar parar o temporizador de instala¸c˜ao autom´atica, pressione
uma tecla qualquer.
3.3
Men´u do Instalador
O men´u de instala¸c˜ao ´e uma forma simples e intuitiva de gerir a sua instala¸c˜ao
IPBRICK. Navegue pelas op¸c˜oes atrav´es das teclas do cursor Cima e Baixo
e clique em Enter para selecionar a op¸c˜ao real¸cada.
3.3.1
Install
Esta op¸c˜ao ´e a predeﬁni¸c˜ao de instala¸c˜ao da IPBRICK v6.0 ´e o equivalente
a deixar que o processo autom´atico de instala¸c˜ao se inicie. Este processo
encontra-se descrito na Sec¸c˜ao 3.4 - Procedimento normal de instala¸c˜ao. A
IPBRICK auto-detecta sistemas operativos anteriores (por favor consulte a
Sec¸c˜ao - 3.4.3 deste documento) e avisa-o que ser´a importante fazer o backup
de dados e de aplica¸c˜oes. Esta op¸c˜ao oferece-lhe Esta op¸c˜ao tamb´em lhe
oferece um elevado grau de preven¸c˜ao de perda de dados.
3.3.2
Upgrade/ReInstall
Esta op¸c˜ao ir´a se aplicar apenas em casos onde exista uma instala¸c˜ao IP-
BRICK pr´evia. De facto, a IPBRICK auto-detecta tamb´em (por favor con-
sulte a Sec¸c˜ao - 3.4.3 deste documento) a instala¸c˜ao IPBRICK anterior e, tal
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
3.3 Men´u do Instalador
11
como no caso de outro sistema operativo, avisa-o que ser´a importante fazer o
backup de dados e de aplica¸c˜oes. Esta op¸c˜ao oferece-lhe Esta op¸c˜ao tamb´em
lhe oferece um elevado grau de preven¸c˜ao de perda de dados.
NOTA IMPORTANTE: Esta op¸c˜ao usa o sistema de ﬁcheiros padr˜ao da
IPBrick v6.0 (EXT4), mas as instala¸c˜oes anteriores podem ter diferentes
sistemas de ﬁcheiros, tais como, XFS ou EXT3. Nestes casos, as parti¸c˜oes
de dados anteriores ser˜ao mantidas enquanto as parti¸c˜oes do sistema ser˜ao
formatadas em EXT4.
3.3.3
Advanced Install
Como o nome sugere, esta op¸c˜ao d´a-lhe a capacidade de personalizar a in-
stala¸c˜ao da sua IPBrick. Oferecendo-lhe novas op¸c˜oes, que s˜ao descritos nas
sec¸c˜oes seguintes deste documento.
Upgrade/ReInstall
Esta outra op¸c˜ao de Upgrade/ReInstall tamb´em lhe permite manter as os
dados de uma instala¸c˜ao pr´evia. Ir´a manter os dados das parti¸c˜oes home1 e
home2, assim como dados das bases de dados.
A diferen¸ca ´e que pode escolher o sistema de ﬁcheiros:
• EXT3 - De forma a manter coerˆencia os sistemas de ﬁcheiros anteriores,
incluimos o EXT3;
• EXT4 - Esta ´e a op¸c˜ao por predeﬁni¸c˜ao. EXT4 ´e a evolu¸c˜ao natural
a partir da EXT3, oferecendo mais funcionalidades: Capacidade de
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
12
Instala¸c˜ao da IPBRICK
Resize, assim como permite o uso de discos de maior capacidade, algo
que o EXT3 n˜ao oferecia;
• XFS - Este sistema de ﬁcheiros ´e usado essencialmente para discos
grandes, oferecendo tamb´em uma maior velocidade de formata¸c˜ao. O
XFS tamb´em permite o Resize do disco.
New Installation
A op¸c˜ao New Installation apaga todos os dados da sua m´aquina, mesmo
se existir uma instala¸c˜ao IPBRICK pr´evia. Tome nota que, ir´a perder todos
os dados do seu servidor!
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
3.3 Men´u do Instalador
13
Depois de ter selecionado a op¸c˜ao New Installation, poder´a selecionar, a
par com a op¸c˜ao Upgrade Reinstall o sistema de ﬁcheiros a ser utilizado:
• EXT3 - De forma a manter coerˆencia os sistemas de ﬁcheiros anteriores,
incluimos o EXT3;
• EXT4 - Esta ´e a op¸c˜ao por predeﬁni¸c˜ao. EXT4 ´e a evolu¸c˜ao natural
a partir da EXT3, oferecendo mais funcionalidades: Capacidade de
Resize, assim como permite o uso de discos de maior capacidade, algo
que o EXT3 n˜ao oferecia;
• XFS - Este sistema de ﬁcheiros ´e usado essencialmente para discos
grandes, oferecendo tamb´em uma maior velocidade de formata¸c˜ao. O
XFS tamb´em permite o Resize do disco.
Custom
Se selecionar a op¸c˜ao Custom, informa¸c˜ao adicional sobre op¸c˜oes e parˆametros
de boot ir´a ser visualizada. A integridade dos dados do meio de instala¸c˜ao
ser´a tamb´em veriﬁcada.
• Se pressionar F1 ir´a visualizar o interface em Figura 3.1;
Figura 3.1: IPBRICK Installation - Help Index
• Ao pressionar F2 ir´a ter acesso ao interface com op¸c˜oes de m´etodos de
boot (Figura 3.2);
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
14
Instala¸c˜ao da IPBRICK
Figura 3.2: IPBRICK Installation - Boot methods
Op¸c˜ao Partitions
A op¸c˜ao partitions permite-lhe alocar um tamanho personalizado (em
GB) para cada uma das seguintes parti¸c˜oes:
1 root
- igual ou maior que 2 GB
2 usr
- igual ou maior que 4 GB
3 var
- igual ou maior que 4 GB
4 opt
- igual ou maior que 2 GB
5 home1 - igual ou maior que 1 GB
6 home2 - igual ou maior que 1 GB
Exemplo:
Se tem um disco r´ıgido de 60 GB e quer que cada parti¸c˜ao tenha um
tamanho de 10GB, tudo o que precisa fazer ´e digitar:
ipbrick eraseall partitions=10,10,10,10,10,10
Cada n´umero separado por v´ırgulas ser´a o tamanho da parti¸c˜ao em GB.
A ordem ´e esta:
1 root
2 usr
3 var
4 opt
5 home1
6 home2
NOTA: Se a sua capacidade em disco ´e de 80GB e se digitar o mesmo
comando de 10GB para todas as parti¸c˜oes, os 20GB restantes ser˜ao di-
vididos em partes iguais pela home1 e home2
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
3.3 Men´u do Instalador
15
Se cometeu um erro, uma p´agina de aviso ser´a exibida (Figura 3.3).
Figura 3.3: Instala¸c˜ao IPBrick - Aviso de erro nas parti¸c˜oes
• Ao pressionar F3 ter´a acesso a um interface de parˆametros especiais de
boot (Figura 3.4).
Figura 3.4: Instala¸c˜ao IPBrick - parˆametros especiais de boot
3.3.4
Instala¸c˜ao a partir de uma Pen USB
Pode-se criar uma vers˜ao port´atil da IPBrick criando uma imagem do CD-
ROM de arranque numa pen USB. Desta forma, pode-se instalar o software
IPBrick sem ter de depender exclusivamente do CD.
Requisitos
• A pen deve ter pelo menos 2GB de capacidade total.
• Uma m´aquina com uma porta USB
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
16
Instala¸c˜ao da IPBRICK
Nota: Se possui na pen dados, que deseja manter, guarde uma c´opia noutra
localiza¸c˜ao. Porque, para montar a imagem, a pen ser´a formatada e perder´a
todos os seus dados.
Procedimento
Para criar a vers˜ao port´atil do software IPBrick, siga os passos seguintes:
(a) Inserir o DVD de arranque da IPBrick na Unidade de DVD-Rom da
m´aquina;
(b) Reiniciar a m´aquina;
(c) Surgir´a o log´otipo da IPBrick.
! Aten¸c˜ao !: Clique em qualquer tecla para parar o tempo-
rizador da instala¸c˜ao autom´atica ou o DVD de arranque da IP-
Brick iniciar´a imediatamente os procedimentos de instala¸c˜ao!
(d) Insira a pen.
(e) Pressione os but˜oes do cursor (cima ou baixo) para navegar at´e:
Create Bootable Pendrive
(f) Por favor aguarde pelo ﬁm do procedimento.
(g) O sistema desmontar´a a pen para, assim, a poder remover.
(h) Remova o DVD
(i) Pressione qualquer tecla para reiniciar a m´aquina.
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
3.4 Procedimento normal de instala¸c˜ao
17
Agora, poder´a utilizar a pen para instalar a IPBrick noutro computador,
basta conﬁgurar a BIOS desse PC para arrancar correctamente a partir da
porta USB.
3.3.5
Manual
A op¸c˜ao Manual concede-lhe a possibilidade de arrancar via DVD para uma
consola onde poder´a executar comandos.
Podendo atuar como uma ferramenta de debug, se a sua instala¸c˜ao n˜ao for
bem sucedida ou se existirem problemas persistentes no p´os-instala¸c˜ao.
NOTA: Esta op¸c˜ao s´o deve ser utilizada por administradores de sistema
experientes!
3.4
Procedimento normal de instala¸c˜ao
Este procedimento ´e o equivalente `a op¸c˜ao Install. Como foi referido ante-
riormente, ´e a op¸c˜ao predeﬁnida de instala¸c˜ao, aquela que ´e executada caso
n˜ao interrompa o temporizador, ao clicar em qualquer tecla.
Por omiss˜ao, o instalador corre em modo gr´aﬁco, com uma barra de pro-
gresso, mas existe um outro modo, mais textual onde cada paso ´e descrito.
3.4.1
Modo Gr´aﬁco
O modo gr´aﬁco (Dialog) apresenta uma barra de progresso ´e ´e a apresenta¸c˜ao
predeﬁnida.
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
18
Instala¸c˜ao da IPBRICK
3.4.2
Modo Texto
Para selecionar o modo Texto, dever´a escolher a op¸c˜ao Custom e digitar
ipbrick no dialog como parˆametro especial de boot (por favor consulte a
Subsec¸c˜ao 3.3.3 deste documento para mais informa¸c˜ao).
Em modo Texto (no Dialog) o procedimento normal de instala¸c˜ao executa
estas a¸c˜oes:
• Aviso do in´ıcio do processo de instala¸c˜ao.
• Carregamento da imagem do Kernel.
• Ap´os o in´ıcio, a script de auto-instala¸c˜ao tentar´a detectar a conﬁgura¸c˜ao
de hardware da m´aquina onde a IPBRICK est´a a ser instalada.
Starting system log daemon
Loading modules
Creating devices
Setting up keyboard
Searching MEDIA
MEDIA Found in: ___
MOUNTING MEDIA
6. Depois de detectar todos os dispositivos do hardware, ser´a criada uma tabela
de parti¸c˜ao no disco r´ıgido.
STARTING HARD DISK DRIVE...
HDD FOUND
USING: ___
CHECKING DISK SIZE...
RESIZING HOMEs to FULL disk size
WRITING PARTITION TABLE TO HDD...
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
3.4 Procedimento normal de instala¸c˜ao
19
7. O procedimento autom´atico de auto instala¸c˜ao inicia-se novamente, detectando
que a tabela de parti¸c˜oes foi aplicada ao disco.
HDD PARTITIONED
PROCEEDING WITH INSTALLATION
8. Ocorre a prepara¸c˜ao da parti¸c˜ao.
FORMATTING HDD...
This step can take some time please wait...
FORMATTING PARTITION /dev/___1
FORMATTING PARTITION /dev/___3
FORMATTING PARTITION /dev/___5
FORMATTING PARTITION /dev/___6
FORMATTING PARTITION /dev/___7
FORMATTING PARTITION /dev/___8
FORMATTING SWAP
MOUNTING NEW FILESYSTEM...
9. A instala¸c˜ao do software:
INSTALLING...
This step can take some time please wait...
INSTALLING DRIVE /media/data/drive1.dat
...
INSTALLING DRIVE /media/data/drive6.dat
CHECKING physical address extension support...
INSTALLING boot loader...
...
Boot loader installed.
...
System is now installed.
10. O processo de instala¸c˜ao termina com a ejec¸c˜ao DVD-ROM. Antes da ex-
puls˜ao do DVD-ROM, ser´a exibida a mensagem seguinte:
UMOUNTING MEDIA
REMOVE MEDIA BEFORE REBOOTING YOUR SYSTEM
DO NOT RESTART SYSTEM WITH IPBRICK RECOVER MEDIA
UMOUNTING ALL
Installation scripts ENDED.
..
11. Retirar o DVD de instala¸c˜ao e reiniciar o computador;
12. Durante o arranque do sistema veriﬁcar se a BIOS est´a conﬁgurada para
arrancar a partir da unidade do disco r´ıgido (HDD);
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
20
Instala¸c˜ao da IPBRICK
13. Ap´os a sequˆencia de arranque da BIOS, esta exibir´a a rotina de arranque
(Grub);
14. A seguir, surgir˜ao as mensagens de arranque kernel. A sequˆencia de arranque
kernel dever´a terminar com as linhas seguintes:
Debian GNU/Linux 4.0 ipbrick tty1
ipbrick login:
3.4.3
Auto Dete¸c˜ao de Instala¸c˜oes Anteriores
Nova, na IPBrick v6.0, ´e a capacidade de detectar instala¸c˜oes anteriores e de
executar o procedimento de instala¸c˜ao mantendo os dados do servidor antigo. Se
existir uma instala¸c˜ao anterior, a IPBRICK exibir´a um aviso de alerta como o da
ﬁgura a seguir. A op¸c˜ao predeﬁnida ´e NO.
NOTA: Obviamente, esta dete¸c˜ao autom´atica s´o ocorre se selecionar qualquer
op¸c˜ao de instala¸c˜ao que n˜ao a New Installation.
A IPBRICK v6.0 tamb´em deteta outros sistemas operativos e ir´a apresentar
um outro aviso, alertando-o para o facto e questionado-o se deseja proseguir com
a instala¸c˜ao.
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
3.5 Mensagens de Erro
21
3.5
Mensagens de Erro
Durante o processo de instala¸c˜ao poder˜ao surgir algumas mensagens.
Os avisos cr´ıticos s˜ao:
• Os scripts de instala¸c˜ao n˜ao detectam a unidade do CDROM:
CDROM NOT FOUND : Aborting INSTALL Scripts (NOT OK)
• Os scripts de instala¸c˜ao n˜ao detectam a unidade do disco r´ıgido (HDD):
NO HARD DISK FOUND... (NOT OK)
ABORTING INSTALLATION... (NO HDD)
• A unidade do disco r´ıgido n˜ao possui o tamanho m´ınimo exigido:
NOT ENOUGH SPACE ON HDD
DISK SIZE: XXXX MegaBytes
NEEDED CAPACITY: YYYY MegaBytes
NOT ENOUGH SPACE ON HDD
NOTA: Em casos de controladoras antigas o procedimento de instala¸c˜ao pode
ser interrompido. Nestes casos, existe a possibilidade de correr o comando:
ipbrick eraseall smalldisk
Este procedimento utiliza a utilidade fdisk para discos com capacidade
m´axima de 2TB.
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
22
Instala¸c˜ao da IPBRICK
Os erros cr´ıticos devem-se a:
• Falha no hardware: o disco n˜ao existe ou tem uma conﬁgura¸c˜ao errada (e.g:
IDE bus, veriﬁcar a existˆencia de MASTER e/ou SLAVE).
• Conﬁgura¸c˜ao errada da BIOS: Veriﬁcar se o hardware est´a conﬁgurado de
forma correcta (HDD, controladores RAID).
• Se o que foi mencionado anteriormente estiver correcto, ent˜ao o DVD IP-
BRICK que tem n˜ao deve suportar a conﬁgura¸c˜ao especial do seu hardware.
Por favor, envie a descri¸c˜ao e conﬁgura¸c˜ao do seu hardware por correio para
support@ipbrick.com. Ser´a contactado pelo Departamento T´ecnico da IP-
Brick.
3.6
Instala¸c˜ao Personalizada
If you insert a Pendrive into the server before installation, it’s possible to make a
customized installation of IPBrick.
3.6.1
Custom Partitioning
Before the installation process, you need to create a ﬁle called parts.dat in the
pendrive root path, with the needed partition table structure (available for Down-
load in the Documentation section). Next, the structure is presented in MB along
with the explanation:
2000 -> Represents the /root partition.
1024 -> Represents the /swap partition.
4500 -> Represents the /usr partition.
2048 -> Do not change!
4000 -> Represents the /var partition.
2000 -> Represents the /opt partition.
100
-> Represents the /home1 partition. Minimum size
100
-> Represents the /home2 partition. Minimum size
7
-> Do not change!
The remaining disk space will be allocated in partitions /home1 and /home2.
3.6.2
Software RAID installation
You can have RAID1 conﬁguration done by software. Before the installation pro-
cess, you should create another ﬁle called ipbrick.cfg in the pendrive root path.
Next, the structure is presented along with the explanation:
CONFIGSOFTRAID=1
-> Activates the software RAID
SOFTRAIDHDD[0]="sda" -> It’s the disk 1 device
SOFTRAIDHDD[1]="sdb" -> It’s the disk 2 device
SOFTRAIDPARTSUF="p"
-> Do not change!
RAIDTYPE=1
-> It’s the RAID type. Only this raid type is supported!
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
3.6 Instala¸c˜ao Personalizada
23
You should know speciﬁcally the correct designation of hard drives devices
before the ﬁle creation, which depends of the used technology: IDE, SCSI, SATA
etc.
NOTE: The RAID installation requires a ﬁle that it is available at our eshop
Error messages
The typical error messages that can be presented are:
• Message 1: The system cannot ﬁnd hard disks and proceed with installation.
This is a critical error because no disks were detected, so it’s impossible to
install the system.
NO HARD DISK FOUND... (NOT OK)
ABORTING INSTALLATION... (NO HDD)
• Message 2: The installation is in the second boot, the RAID was created in
the ﬁrst boot but it can’t initialize. It’s a critical error because the system
knows that a RAID is conﬁgured but it can’t be initialized.
Failed to assemble software raid
ABORTING INSTALLATION...
• Message 3: The installation is in the ﬁrst boot and it unsuccessfully tries to
create the RAID. The system detects the RAID conﬁgurations in the pen
but cannot create the raid:
Failed to config software raid
ABORTING INSTALLATION...
• Message 4: Here the installation is almost done and the Boot Loader is being
conﬁgured but the Boot Loader is not installed properly. So it can be critical
- the machine could not boot because the Boot Loader was unsuccessfully
installed.
ERROR installing boot loader.
ABORTING INSTALLATION...
Note: The ﬁles must be saved in ASCII format. If you want to test that they
are, you can do file <filename> in Linux console.
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
24
Instala¸c˜ao da IPBRICK
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
Cap´ıtulo 4
Gerir a IPBrick
4.1
Conﬁgura¸c˜ao da Rede
• Placa de rede privada (eth0)
– IP: 192.168.69.199
– Rede: 192.168.69.0/24
• Placa de rede publica (eth1)
– IP: 10.0.0.253
– Rede: 10.0.0.252/30
• Gateway: 10.0.0.254 (eth1)
• Hostname: ipbrick.domain.com
4.2
Liga¸c˜ao `a IPBRICK
A IPBRICK cont´em um browser nativo browser de forma a que seja mais simples
aceder ao interface sem ter que utilizar um port´atil ou outra m´aquina para aceder.
Muito ´util em ambientes virtuais. Precisa apenas de um monitor, rato e teclado
para implementar as sempre importantes primeiras conﬁgura¸c˜oes (consulte por
favor as Sec¸c˜oes 4.3 - Logins e Passwords e 8 - Procedimentos Importantes).
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
26
Gerir a IPBrick
Figura 4.1: Login IPBRICK
Depois de se autenticar encontrar´a o sempre ´util ´ıcone de Consola-Debug, lo-
calizado no canto superior direito do ecr˜a. Note que, este ´ıcone aparece apenas a
primeira vez q instala a IPBRICK, nos acessos seguintes ao interface, este ´ıcone
n˜ao ser´a visualizado. Este ´ıcone aparece tamb´em quando o browser ´e aberto via
consola. Pode tamb´em clicar nele para o fechar.
Figura 4.2: ´Icone de Consola-Debug
NOTA: Este interface ´e apresentado sempre que aceda localmente. No entanto,
poder´a na consola digitar o comando: gui-console start
4.2.1
Liga¸c˜ao Directa
Em ambientes f´ısicos poder´a desejar ligar um cabo de rede cruzado `a placa da
unidade de gest˜ao (por exemplo, um PC port´atil) e `a placa de rede da IPBRICK
(Figura8.33).
Figura 4.3: Direct connection between an IPBRICK and a PC
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
4.2 Liga¸c˜ao `a IPBRICK
27
Neste cen´ario, a conﬁgura¸c˜ao da rede da unidade de gest˜ao pode ser preparada
para receber o endere¸co IP autom´atico e a conﬁgura¸c˜ao DNS - cliente DHCP.
No exemplo de conﬁgura¸c˜ao seguinte usaremos um computador port´atil com o
sistema operativo MS Windows 7.
A conﬁgura¸c˜ao recebida a partir do DHCP ´e:
• IP: 192.168.69.64 to 192.168.69.95;
• M´ascara Sub-rede: 255.255.255.0;
• Gateway por omiss˜ao: 192.168.69.199;
• Servidor DNS: 192.168.69.199.
Procedimento para preparar a conﬁgura¸c˜ao IP dinˆamica (DHCP)
NOTA: Os procedimentos seguintes s˜ao v´alidos para o Windows 7!
1. Premir a tecla [windows]
2. Escolher Painel de Controlo
3. Choose Network and Sharing Center
4. Clique em Network and Internet
5. Clique em the Local Area Connection
6. Clique em Properties
7. Na pr´oxima caixa de di´alogo, selecione TCP/IPv4 e clique em Properties
8. Na pr´oxima caixa de di´alogo, selecione ”Obtain automatic IP conﬁguration”e
”Obtain DNS servers address automatically”
9. Feche as janelas ”TCP/IP Properties”e ”Network Properties”para gravar as
modiﬁca¸c˜oes.
Se o posto de gest˜ao j´a foi conﬁgurado com as conﬁgura¸c˜oes descritas acima,
ent˜ao pro¸ceda da seguinte forma:
Procedimento de renova¸c˜ao do endere¸co IP
1. Pressione as teclas [windows]+[R] (simultaneamente)
2. Digite cmd e press [ENTER] (or push the OK button)
3. Digite ipconﬁg /release e pressione [ENTER]
4. Digite ipconﬁg /renew e pressione [ENTER]
5. Digite ipconﬁg /all e pressione [ENTER]
6. To close this window, type exit e pressione [ENTER]
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
28
Gerir a IPBrick
Como veriﬁcar o seu endere¸co IP
Para veriﬁcar o seu endere¸co IP, proceda
da seguinte forma:
1. Premir as teclas [windows]+[R] (ao mesmo tempo)
2. Digitar cmd e premir [ENTER] (ou premir o bot˜ao OK)
3. Digitar ipconﬁg /all e premir [ENTER]
4. Para fechar esta janela, digitar exit e premir [ENTER]
Se no ﬁnal deste procedimento ainda n˜ao tiver um endere¸co IP como o que foi
anteriormente descrito:
1. Veriﬁque a liga¸c˜ao `a rede (link, luz verde acesa) na placa de interface da rede
da unidade de gest˜ao. Se n˜ao tiver uma liga¸c˜ao, veriﬁque se o seu cabo de
rede est´a em bom estado e se se trata realmente de um cabo de rede cruzado.
2. Se o computador IPBrick possuir duas placas de interface de rede, ligue o
seu cabo de rede `a outra placa de interface de rede. Repita o Procedimento
para renovar o endere¸co IP.
4.2.2
Liga¸c˜ao atrav´es de um hub ou de um switch
Ligar a placa de interface de rede da IPBRICK a um hub ou um switch (Figura4.4).
A unidade de gest˜ao deve estar ligada ao mesmo hub ou switch (como alternativa,
deve assegurar-se a conectividade da unidade de gest˜ao ao hub ou switch).
Figura 4.4: Ligar a IPBrick a um PC com um switch
No exemplo seguinte, usaremos uma unidade de gest˜ao com o sistema operativo
MS Windows:
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
4.2 Liga¸c˜ao `a IPBRICK
29
Procedimento para conﬁgurar um endere¸co IP est´atico
1. Press the [windows] key
2. Selecionar Control Panel
3. Selecionar Network and Sharing Center
4. Clique em Network and Internet
5. Clique em the Local Area Connection link
6. Clique em Properties
7. Na caixa de di´alogo selecione IPV4 e clique no bot˜ao Properties.
8. Na caixa de di´alogo, preencha os seguintes campos:
• Endere¸co IP: 192.168.69.1
• M´ascara de rede: 255.255.255.0
• Gateway: 192.168.69.199
• Servidor DNS Prim´ario: 192.168.69.199
• Fechar a janela premindo o bot˜ao OK
9. Fechar a janela Network Properties premindo o bot˜ao OK para gravar as
altera¸c˜oes.
Procedimento para testar a conectividade da rede
1. Press keys [windows]+[R] (ao mesmo tempo)
2. Digitar cmd e premir [ENTER]
3. Digitar ping 192.168.69.199 e premir [ENTER]
4. Deve obter as linhas seguintes no utilit´ario ping:
Answer from 192.168.69.199: bytes=32 time<1ms TTL=64
Answer from 192.168.69.199: bytes=32 time<1ms TTL=64
Answer from 192.168.69.199: bytes=32 time<1ms TTL=64
Answer from 192.168.69.199: bytes=32 time<1ms TTL=64
Ping statistics for 192.168.69.199:
Packets: Sent = 4, Received = 4, Lost = 0
5. Para fechar esta janela, digitar exit e premir [ENTER]
Com a liga¸c˜ao preparada, o servidor IPBrick pode ser acedido utilizando qual-
quer browser da web (MS Internet Explorer, Firefox, Opera, Chrome)
O endere¸co URL ´e: https://ipbrick.domain.com ou https://192.168.69.199.
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
30
Gerir a IPBrick
4.3
Logins e Passwords
NOTA IMPORTANTE: As credenciais de autentica¸c˜ao apresentadas a seguir
s˜ao logins predeﬁnidos do sistema. Escusado ser´a dizer que, ap´os o processo de
instala¸c˜ao, dever´a alter´a-los. O n˜ao cumprimento desta directiva abre uma brecha
na seguran¸ca do seu sistema !!!
Para informa¸c˜ao sobre este assunto ou outros procedimentos cruciais, consulte
por favor a Sec¸c˜ao 8 Apˆendice C - Procedimentos Importantes.
4.3.1
IPBRICK - Interface Web (GUI)
• URL
https://192.168.69.199
https://ipbrick.domain.com
• Nome: admin
• Password: 123456
4.3.2
IPBRICK - Console
• root : R0laBill
• operator: L1opardo
4.3.3
IPBRICK - C´opia de Correio
Existem duas contas de e-mail destinadas ao armazenamento das mensagens IP-
Brick recebidas e enviadas. Inicialmente, a consulta (POP ou IMAP) destas men-
sagens ´e feita por:
Correio enviado
• Login: sentmail
• Password: L1opardo
Correio recebido
• Login: receivedmail
• Password: L1opardo
Nota: Ap´os instala¸c˜ao da IPBrick este servi¸co n˜ao est´a activo, mas pode ser ac-
tivado mais tarde atrav´es do interface web em IPBrick.C- >> E-Mail- >> C´opia de correio.
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
4.3 Logins e Passwords
31
4.3.4
IPBRICK - IPBRICK.SEC AntiSpam
A IPBrick possui uma conta de e-mail do sistema intitulada spam, que ´e utilizada na
IPBRICK.SEC. A ideia ´e obter todo o correio spam ﬁltrado nessa conta espec´ıﬁca.
Inicialmente, a consulta (POP ou IMAP) destas mensagens ´e feita por:
• Login: spam
• Password: L1opardo
Nota: Estas notiﬁca¸c˜oes s´o existem se a IPBrick tiver a licen¸ca IPBRICK.SEC.
4.3.5
IPBRICK - Contactos
• URL
http://contacts.domain.com
• Login and administration password:
administrator : 123
O acesso a este servi¸co est´a inicialmente limitado ao utilizador ”administrador”.
Este utilizador conceder´a acesso e permiss˜oes aos outros utilizadores da IPBrick.
Cada utilizador dever´a usar o seu pr´oprio login e password para se autenticar.
4.3.6
PostgreSQL - DataBase Server
• URL
http://pgsqladmin.domain.com
• Login e password de administra¸c˜ao:
sqlserver : sqlserver
Para alterar as credenciais predeﬁnidas em PgSQLadmin, aceda ao interface:
pgsqladmin.domain.com - No lado esquerdo do ecr˜a, clique em PostgreSQL
(use o login: sqlserver e a password: sqlserver).
Clique em Roles e depois em Alter para modiﬁcar as credenciais para postgres
e sqlserver
Figura 4.5: Altera¸c˜ao das credenciais de administra¸c˜ao
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
32
Gerir a IPBrick
4.3.7
IPBRICK.SEC Anti-Spam
Para aceder ao IPBRICK.SEC Anti-Spam, no interface IPBRICK, v´a a:
IPBrick.C
E-Mail
Anti-Spam
Ou:
IPBrick.SEC
E-Mail
Anti-Spam
O interface de conﬁgura¸c˜ao est´a dispon´ıvel s´o para o utilizador ”administrador”.
´E exigida uma autentica¸c˜ao inicial, o login e a password s˜ao os mesmos usados para
aceder ao interface web da IPBrick (GUI).
4.3.8
IPBRICKCAFE
• URL
https://cafe.domain.com
O acesso a este servi¸co ´e concedido a todos os utilizadores IPBRICK . Cada
um pode aceder utilizando as suas credenciais pr´oprias.
NOTA IMPORTANT: O servi¸co IPBRICK CAFE substitui o portal MyIP-
BRICK. Aqui, encontrar´a todas as funcionalidades anteriores e muitas outras.
Para mais informa¸c˜ao consulte o manual de referˆencia da IPBRICK - Anexo F.
Para alterar as credenciais de administrador do CAFE, aceda ao interface:
cafe.domain.com
• login: admin
• password: 123456
V´a `as op¸c˜oes de administra¸c˜ao.
Figura 4.6: Altera¸c˜ao credenciais de administrador
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
4.3 Logins e Passwords
33
4.3.9
Groupware
• URL
http://groupware.domain.com
O acesso a este servi¸co ´e concedido a todos os utilizadores da IPBrick. Cada
um deve usar o seu pr´oprio login e password.
4.3.10
IPBrick - Instant Messaging
• URL
http://ipbrick.domain.com:5280/admin/
• Login and administration password:
administrator@ipbrick.domain.com: 123
Esta aplica¸c˜ao permite conﬁgura¸c˜oes especiais no servi¸co Instant Messaging
(IM).
4.3.11
IPBrick - Callmanager
• URL
http://callmanager.domain.com
• Login e password de administra¸c˜ao:
administrator:123
Esta aplica¸c˜ao permite o acesso ao Asterisk Callmanager.
4.3.12
VOIP CDR
Pode aceder via FTP a um ﬁcheiro .CSV que regista as estatisticas de chamadas.
• Nome: VoIPCDR
• Login: L1opardo
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
34
Gerir a IPBrick
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
Cap´ıtulo 5
Mais informa¸c˜ao
5.1
Suporte T´ecnico
Para contactar o apoio t´ecnico da IPBrick, por favor envie um e-mail para:
support@ipbrick.com.
5.2
Links ´Uteis
• www.ipbrick.com
• www.iportaldoc.com
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
36
Mais informa¸c˜ao
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
Cap´ıtulo 6
Apˆendice A - IPBrick.GT
Este cap´ıtulo cont´em as instru¸c˜oes necess´arias para uma interliga¸c˜ao correcta da
IPBBrick.GT (Figura 6.1) `a rede do cliente existente e ao acesso `a telefonia.
Figura 6.1: appliance IPBRICK
6.1
Liga¸c˜oes IPBBrick.GT
Na parte frontal de uma appliance IPBBrick.GT temos:
• 4 portas - RJ-45 (4x Gigabit-Ethernet): A porta da esquerda ´e a eth0,
seguindo para o lado direito encontraremos a eth1, eth2, eth3;
• 2 portas- USB 2.0;
• Porta de Consola: Para ligar a extens˜ao RJ-45 inclu´ıda na appliance. O
Windows HyperTerminal pode ser usado com estas conﬁgura¸c˜oes:
baud rate 19200, parity none, data bits 8 and stop bits 1
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
38
Apˆendice A - IPBrick.GT
• Display: Um pacote .deb pode ser instalado na IPBrick para mostrar o
estado da porta das placas de ethernet/telefonia;
Na parte traseira de uma aplica¸c˜ao IPBbrick.GT temos:
• Duas ranhuras PCI para as placas de telefonia;
• Um comutador de energia;
6.2
Comunica¸c˜oes anal´ogicas
No caso dos acessos/linhas de telefonia anal´ogicas, a IPBbrick.GT tem uma placa
como a da Figura 6.2. Esta placa pode ter m´odulos diferentes inseridos:
• FXS: Foreign eXchange Subscriber interface, para ligar aos telefones, modems,
FAX, etc... (M´ODULOS VERDES);
• FXO: Foreign eXchange Oﬃce interface, para ligar ao PSTN (M´ODULOS
VERMELHOS);
No exemplo da Figura 6.2, os dois primeiros interfaces s˜ao FXS e os ´ultimos
dois s˜ao FXO. ´E poss´ıvel ver a liga¸c˜ao entre o m´odulo e a porta espec´ıﬁca. Se
desejar ligar telefones `as portas FXS, estas portas dever˜ao ser ligadas, usando o
interface PW mostrado na Figura 6.2.
Nota: Os jumpers da placa n˜ao devem ser alterados. O link f´ısico ´e o RJ-11.
Figura 6.2: Placa anal´ogica de telefonia
6.3
Comunica¸c˜oes Digitais
INas linhas digitais, as placas IPBbrick.GT podem ser ISDN BRI ou ISDN PRI.
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
6.3 Comunica¸c˜oes Digitais
39
6.3.1
BRI
A placa ISDN BRI1 exibida na Figura 6.3 tem 4 portas (as placas de telefonia
tamb´em tˆem conﬁgura¸c˜oes 1BRI, 2BRI e 8BRI). A cada porta est´a associado um
grupo de 5 jumpers e dependendo da conﬁgura¸c˜ao dos jumpers, a porta pode
ﬁcar como NT2 (como operador) ou TE3 (como PBX). Por exemplo, nas placas
Beronet se os jumpers est˜ao ligados aos dois pins do lado direito (conﬁgura¸c˜ao
por omiss˜ao), a porta ´e conﬁgurada como TE. Se os jumpers est˜ao ligados aos dois
pins do lado esquerdo, a porta ´e conﬁgurada como NT. ´E importante veriﬁcar e
conﬁgurar sempre todos os jumpers da porta.
Normalmente, as placas de telefonia tˆem o esquema de conﬁgura¸c˜ao TE/NT,
mas pode sempre consultar o manual de instru¸c˜oes da placa.
Um esquema completo de uma placa 8BRI est´a presente em:
http://www.ipbrick.com/files/8BRISchema.png
Figura 6.3: placa BRI
A conﬁgura¸c˜ao correcta da placa (NT,TE) entre todos os interfaces da empresa
´e apresentada na Figura 6.4.
Leds
• Vermelho ﬁxo: Com link;
• Vermelho intermitente: Sem link;
1Basic Rate Interface
2Network Termination
3Terminal Equipment
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
40
Apˆendice A - IPBrick.GT
Figura 6.4: Interliga¸c˜ao entre IPBrick, PSTN e PBX
• Verde ﬁxo: Chamada actual usando essa porta.
Pinout
O pinout correcto do cabo entre PSTN, IPBbrick.GT e PBX pode ser visto na
Figura 6.5 e Figura 6.6.
Figura 6.5: Pinout directo do cabo RJ-45
Figura 6.6: Pinout cruzado do cabo RJ-45 entre a IPBbrick.GT e PBX
6.3.2
PRI
Para as linhas PRI4 (E1 na Europa ou T1 nos EUA) existem placas de telefonia
com 1, 2 o4 4 portas.
Na Figura 6.7 ´e exibida uma placa PRI com 2 portas.
Dependendo do fabricante, a porta 1 pode ser desiganda como 1 (Digium) ou A
(Sangoma), e a porta 2 como 2 ou B.
Leds
• Vermelho ﬁxo: Com link;
• Verde ﬁxo: Sem link.
4Primary Rate Interface
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
6.3 Comunica¸c˜oes Digitais
41
Figura 6.7: Placa PRI
Pinout
O pinout correcto do cabo entre PSTN, IPBbrick.GT e PBX pode ser visto na
Figura 6.8.
Figura 6.8: Pinout cruzado do cabo RJ-45 entre IPBbrick.GT e PBX
A liga¸c˜ao entre o modem PRI e o PBX existente pode usar:
• Cabos coaxiais: Dois cabos coaxiais (enviar e receber) est˜ao ligados entre o
modem PRI e o PBX (Figura 6.10). O conector ´e habitualmente BNC, mas
s˜ao utilizados tipos diferentes de conectores BNC, dependendo do operador.
• Cabos UTP: Um cabo PRI UTP entre o modem PRI e o PBX que usa
conectores RJ-45 (Figura 6.11)
Dependendo do tipo de liga¸c˜ao, a IPBrick pode interceptar essa liga¸c˜ao PBX/PSTN
usando:
• balun (Figura 6.9) ´e um conversor que pode ser ligado por 2 cabos coaxiais
de um lado (2 BNCs), e no outro lado um ´unico cabo RJ-45 pode ser ligado
numa porta da placa de telefonia IPBrick. O esquema de liga¸c˜ao pode ser
visualizado na Figura 6.13;
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
42
Apˆendice A - IPBrick.GT
• RJ-45: A liga¸c˜ao entre PBX, IPBbrick.GT e PSTN ´e feita por cabos UTP
usando conectores RJ-45 (Figura 6.12);
Figura 6.9: Balun BNC/RJ45
Figura 6.10: Modem PRI e liga¸c˜ao PBX por coaxial
Figura 6.11: Modem PRI e liga¸c˜ao PBX por UTP
Figura 6.12: IPBrick a interceptar a linha PRI e PBX usando s´o os cabos UTP
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
6.3 Comunica¸c˜oes Digitais
43
Figura 6.13: IPBrick a interceptar a linha PRI e PBX usando baluns
NOTA: Para as liga¸c˜oes directas BRI/PRI que usam UDP, podem ser uti-
lizados cabos normais de rede ethernet (4 pares). N˜ao ´e necess´ario usar cabos
espec´ıﬁcos BRI/PRI UDP (2 pares).
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
44
Apˆendice A - IPBrick.GT
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
Cap´ıtulo 7
Apˆendice B - Recupera¸c˜ao de
Desastre
Aquando da instala¸c˜ao da IPBRICK existe uma conﬁgura¸c˜ao denominada de
default que n˜ao ´e mais que a conﬁgura¸c˜ao base da IPBrick quando ´e instal-
ada.
Todas as conﬁgura¸c˜oes subsequentes, realizadas na IPBrick, atrav´es da inter-
face web, s˜ao guardadas numa base de dados Postgres, de forma que, qualquer
altera¸c˜ao realizada s´o se torna efectiva no sistema ap´os realizar um Aplicar Con-
ﬁgura¸c˜oes.
A IPBrick permite uma gest˜ao de conﬁgura¸c˜oes eﬁcaz onde sempre que s˜ao efec-
tuadas altera¸c˜oes no sistema pela interface web https://, uma nova conﬁgura¸c˜ao ´e
gravada localmente podendo ser armazenada automaticamente numa pen USB
ou enviada para um endere¸co de email conﬁgur´avel.
No nome do ﬁcheiro de
conﬁgura¸c˜ao consta a data e a hora exacta quando foi criada essa conﬁgura¸c˜ao.
Deste modo, caso exista algum problema na m´aquina ´e poss´ıvel recuperar as con-
ﬁgura¸c˜oes j´a feitas.
!
Aten¸c˜ao !: Ap´os a instala¸c˜ao da IPBrick deve colocar sempre uma pen
USB ligada ao servidor. A pen dever´a ter o nome de verb—IPBRICK-D— e ser
formatada em FAT32;
7.0.1
Alterar o nome da pen USB
Para alterar o nome da pen USB para IPBRICK-D basta clicar com o bot˜ao direito
do rato sobre o ´ıcone correspondente em O Meu Computador e selecionar Rename.
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
46
Apˆendice B - Recupera¸c˜ao de Desastre
Figura 7.1: Alterar o nome da pen USB
Digite IPBRICK-D
Figura 7.2: Alterar o nome da pen USB para ’IPBRICK-D’
7.0.2
Formatar a pen USB
Para veriﬁcar se a pen est´a formatada em NTFS ou FAT32 basta clicar com o bot˜ao
direito do rato sobre o ´ıcone correspondente e selecionar Properties.
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
47
Figura 7.3: Propriedades pen USB
Veriﬁque se est´a em FAT32 (n˜ao ´e nescess´aria qualquer formata¸c˜ao) ou NTFS
(ter´a de formatar a pen para FAT32) em File System.
Figura 7.4: Propriedades pen USB - File System
Se indicar NTFS ter´a de a formatar. Para o fazer, basta clicar com o bot˜ao
direito do rato sobre o ´ıcone da pen e selecionar Format.
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
48
Apˆendice B - Recupera¸c˜ao de Desastre
Figura 7.5: Pen USB - Format
Na nova janela selecione FAT32, veriﬁque a label (nome) e clique em Start.
Figura 7.6: Pen USB - Formata¸c˜ao
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
Cap´ıtulo 8
Apˆendice C - Procedimentos
Importantes
Depois de instalar a IPBRICK ´e necess´ario cumprir os procedimentos descritos
neste apˆendice. De alterar credenciais `a mudan¸ca do endere¸co de e-mail para os
alertas, estes procedimentos s˜ao essenciais se quiser garantir a seguran¸ca do seu
sistema.
A IPBRICK tem um novo ´ıcone de aviso no canto superior direito do ecr˜a.
Este ´ıcone orienta-o nestes cruciais primeiros procedimentos.
Figura 8.1: ´Icone de Alerta
Este ´ıcone ir´a piscar, se existirem mudan¸cas importantes a serem feitas no
sistema, e se clicar nele ter´a acesso a uma nova janela com a enumera¸c˜ao das
corre¸c˜oes e veriﬁca¸c˜oes necess´arias por fazer.
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
50
Apˆendice C - Procedimentos Importantes
Figura 8.2: Janela de Alertas
Cada item na enumera¸c˜ao oferece-lhe a chance de alterar conﬁgura¸c˜oes impor-
tantes, ao clicar nos bot˜oes Fix ou Check.
Normalmente, o bot˜ao Fix indica uma mudan¸ca mais urgente (por exemplo:
Altera¸c˜ao da palavra-passe predeﬁnida do Administrador).
Se clicar nele, ser´a
redirecionado para a p´agina de resolu¸c˜ao do alerta.
Figura 8.3: Gest˜ao de Utilizadores - Administrador
O bot˜ao Check tamb´em redireciona-o para a p´agina onde necessita veriﬁcar
essa conﬁgura¸c˜ao.
Figura 8.4: Alerta - Bot˜ao Check
Depois de veriﬁcar se existem problemas, poder´a aceder `a lista de alertas e
clicar no bot˜ao Done para que o aviso seja removido da lista.
Figura 8.5: Alerta - Bot˜ao Done
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
8.1 Credenciais do utilizador Administrador
51
Figura 8.6: Janela sem o alerta que foi resolvido
Nas sec¸c˜oes seguintes, iremos abordar cada uma das conﬁgura¸c˜oes necess´arias
exibidas na janela de alertas.
8.1
Credenciais do utilizador Administrador
Em:
IPBrick.I - Users Management - Users List
Figura 8.7: IPBrick.I - Users Management - Users List
Encontrar´a o utilizador Administrator.
Figura 8.8: Lista Utilizadores
Clique no seu nome e na nova p´agina clique no link Modify.
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
52
Apˆendice C - Procedimentos Importantes
Figura 8.9: Utilizador Administrator
Altere as deﬁni¸c˜oes e clique no bot˜ao Modify.
Figura 8.10: P´agina de altera¸c˜ao do utilizador Administrator
8.2
Credenciais dos Utilizadores de Sistema
Para alterar as cedenciais aceda a:
Advanced Configurations > System > System Users
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
8.2 Credenciais dos Utilizadores de Sistema
53
Figura 8.11: Advanced Conﬁgurations - System - System Users
Na nova p´agina, poder´a ver que o nome de utilizador e o login est˜ao arranjados
numa lista.
Figura 8.12: Lista dos Utilizadores de Sistema
O procedimento de altera¸c˜ao da password ´e idˆentico para todos.
Como um exemplo iremos alterar a passe de root. Clique no nome sublinhado,
neste caso, ’root’, a nova p´agina ir´a visualizar o nome e o login, clique no link
Modify.
Figura 8.13: Link Modify
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
54
Apˆendice C - Procedimentos Importantes
Na nova p´agina, digite a senha antiga e, em seguida, digite e redigite a nova
para conﬁrm´a-la. Clique no bot˜ao Modify para aplicar as novas deﬁni¸c˜oes.
Figura 8.14: Altera¸c˜ao da passe de root
8.3
Credenciais do administrador do sistema
Aceda a:
Advanced Configurations > Web Access
Figura 8.15: Advanced Conﬁgurations - Web Access
Na nova janela, clique no primeiro link Modify.
Figura 8.16: Link Modify
Altere as credenciais, dos valores por omiss˜ao para os novos (n’˜ao se esque¸ca
de redigitara nova passe) e clique no bot˜ao Modify.
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
8.4 CAFE e PostGresSQL
55
Figura 8.17: Modiﬁca¸c˜ao das credenciais do administrador do sistema
8.4
CAFE e PostGresSQL
Por favor consulte a Sec¸c˜ao 4.3 . Logins e Passwords deste documento.
8.5
Alertas de Email
A IPBRICK envia, para o e-mail do administrador, alertas quando a parti¸c˜ao ´e
excedida ou se encontrar quaisquer outros problemas com os servi¸cos.
Se n˜ao tem o h´abito de veriﬁcar o e-mail do administrador IPBRICK, pode
sempre alterar o endere¸co de e-mail para outro mais freq¨uentemente visitado.
Access:
Advanced Configurations
System
Monitoring
Alerts
Figura 8.18: Op¸c˜ao de Alertas
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
56
Apˆendice C - Procedimentos Importantes
Na nova p´agina, pode ver o endere¸co de origem (o que ir´a enviar os e-mails de
alerta) e o endere¸co de destino (aquele que ir´a receber esses alertas), por omiss˜ao,
o destinat´ario do e-mail ´e o administrador IPBRICK. Clique no link
Modify.
Figura 8.19: Link Modify
Basta digitar no endere¸co de destino do e-mail que consulta com mais freq¨uˆencia.
Tamb´em ´e poss´ıvel desativar os alertas de parti¸c˜ao excedida e servi¸cos com prob-
lemas. Clique no bot˜ao Modify para alterar as deﬁni¸c˜oes.
Figura 8.20: Altera¸c˜ao do endere¸co de destino
8.6
Email para envio das deﬁni¸c˜oes do sistema
Esta op¸c˜ao est´a dispon´ıvel em:
Figura 8.21: Advanced Conﬁgurations - Disaster Recovery - Conﬁgurations - Re-
place
Clique em Definitions.
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
8.7 Email para o envio das notiﬁca¸c˜oes dos backups das BDs
57
Figura 8.22: Link Deﬁnitions
Este e-mail vai receber os ﬁcheiros de conﬁgura¸c˜oes do sistema. ´E muito im-
portante que conﬁgure-o com um endere¸co de acesso frequente.
Figura 8.23: P´agina Replace
Como sempre, clique no link Modify. Uma nova p´agina ser´a exibida, onde
vocˆe ser´a capaz de alterar o endere¸co de origem, endere¸co de destino, assunto da
mensagem e corpo da mensagem do e-mail que cont´em as deﬁni¸c˜oes do sistema.
Clique no bot˜ao Modify para alterar as deﬁni¸c˜oes.
Figura 8.24: P´agina Modify
8.7
Email para o envio das notiﬁca¸c˜oes dos back-
ups das BDs
Aceda a:
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
58
Apˆendice C - Procedimentos Importantes
Figura 8.25:
Advanced Conﬁgurations - Disaster Recovery - Applications -
Databases
Clique no link Definitions.
Figura 8.26: Link Deﬁnitions
Desta vez, o e-mail conﬁgurado lida com as notiﬁca¸c˜oes de backup das bases
de dados. ´E fundamental que veriﬁque periodicamente este e-mail!
Figura 8.27: Deﬁni¸c˜oes backups BDs
Clique em Modify para que lhe surja a nova p´agina.
Figura 8.28: P´agina de Modifca¸c˜ao
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
8.8 Servi¸cos a serem prestados neste servidor
59
Altere os campos: notiﬁcar de endere¸co, endere¸co de Administrador, login e
senha do backup das bases de dados PostgreSQL.
Quando tiver terminado, clique no bot˜ao Modify.
8.8
Servi¸cos a serem prestados neste servidor
Dispon´ıvel em:
Figura 8.29: Advanced Conﬁgurations - System - Services
Aqui visualiza a lista de todos os servi¸cos disponiveis na IPBRICK.
Figura 8.30: Servi¸cos
Clique em Modify e altere o estado e a forma de in´ıcio do servi¸co.
Em State pode selecionar Enable (Activo) ou Disable (Inactivo).
IPBRICK SA - 2014
Manual Instala¸c˜ao - Vers˜ao 6.0
60
Apˆendice C - Procedimentos Importantes
Figura 8.31: State
Em Start pode selecionar Autom´atico ou Manual.
Figura 8.32: Start
Quando terminar, no fundo da p´agina encontrar´a o bot˜ao Update para atualizar
as mudan¸cas.
Figura 8.33: Bot˜ao Update
Manual Instala¸c˜ao - Vers˜ao 6.0
IPBRICK SA - 2014
